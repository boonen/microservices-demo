web:
  build: microservices-web/. # Use the Dockerfile under my myapp-api
  working_dir: ./bin/microservices-web
  # Let this container talk to rabbitmq
  links:
    - rabbitmq
  ports:
    - "8081:8080"
  # Share the cwd on my mac with the container
  volumes:
    - .:./bin/microservices-web

# The default RabbitMQ is good enough here
rabbitmq:
  image: dockerfile/rabbitmq
  # Expose the port so we can access the Admin Console
  ports:
    - "5672:5672"
    - "15672:15672"
  # Persist the data between containers.
  volumes:
    - ./data:/data/rabbitmq/log
    - ./data:/data/rabbitmq/mnesia